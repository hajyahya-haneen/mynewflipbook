<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Flipbook – ضبط الإطار</title>

<style>
*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:12px;
  background:#f2f2f2;
  font-family: Arial, sans-serif;
}

/* حاوية الكتاب */
#book-wrap{
  width: min(1200px, 96vw);
  height: min(85vh, 800px);
  background:#fff;
  border-radius:16px;
  box-shadow:0 18px 55px rgba(0,0,0,.18);
  overflow:hidden;
  position:relative;
}

#book{
  width:100%;
  height:100%;
}

/* الصفحة نفسها = الإطار */
.page{
  width:100%;
  height:100%;
  overflow:hidden;                 /* الحل الأساسي */
  display:flex;                    /* لتوسيط الصورة */
  align-items:center;
  justify-content:center;
  background:#fff;
}

/* الصورة لا تتجاوز الإطار */
.page img{
  max-width:100%;
  max-height:100%;
  width:auto;
  height:auto;
  object-fit:contain;              /* بدون قص */
  display:block;
  user-select:none;
  pointer-events:none;
}

/* مناطق الزوايا فقط */
.corner{
  position:absolute;
  width:120px;
  height:120px;
  bottom:0;
  z-index:50;
  background:rgba(0,0,0,0);
  pointer-events:auto;
}

.corner.next{ left:0; cursor:pointer; }
.corner.prev{ right:0; cursor:pointer; }

@media (max-width:480px){
  .corner{ width:90px; height:90px; }
}

.controls{
  display:flex;
  gap:10px;
  direction:rtl;
}

button{
  padding:10px 14px;
  border-radius:12px;
  border:0;
  background:#111;
  color:#fff;
  cursor:pointer;
}
</style>

<script src="pageflip.min.js"></script>
</head>

<body>

<div id="book-wrap">
  <div id="book"></div>

  <!-- الزوايا -->
  <div class="corner next"></div>
  <div class="corner prev"></div>
</div>

<div class="controls">
  <button id="prev">السابق</button>
  <button id="next">التالي</button>
</div>

<script>
const TOTAL = 26;
const PREFIX = "page";
const EXT = "jpg";

const bookEl = document.getElementById("book");
const wrapEl = document.getElementById("book-wrap");

function pad(n){ return String(n).padStart(2,"0"); }

/* إنشاء الصفحات */
for(let i=1;i<=TOTAL;i++){
  const d = document.createElement("div");
  d.className = "page";
  d.innerHTML = `<img src="${PREFIX}${pad(i)}.${EXT}" alt="">`;
  bookEl.appendChild(d);
}

/* حساب مقاس الصفحة */
function pageSize(){
  const w = wrapEl.clientWidth;
  const h = wrapEl.clientHeight;
  return {
    width: Math.min(600, Math.floor(w/2)),
    height: Math.min(800, h)
  };
}

const {width, height} = pageSize();

/* PageFlip */
const pageFlip = new St.PageFlip(bookEl, {
  width,
  height,
  size:"stretch",

  minWidth:315,
  maxWidth:1200,
  minHeight:315,
  maxHeight:1200,

  showCover:true,
  disableFlipByClick:true,
  useMouseEvents:true,
  swipeDistance:30,
  flippingTime:700,
  maxShadowOpacity:0.35
});

pageFlip.loadFromHTML(document.querySelectorAll(".page"));

/* RTL بصري */
bookEl.style.transform = "scaleX(-1)";
document.querySelectorAll(".page img").forEach(img=>{
  img.style.transform="scaleX(-1)";
});

/* أزرار */
document.getElementById("next").onclick = ()=>pageFlip.flipNext();
document.getElementById("prev").onclick = ()=>pageFlip.flipPrev();

/* زوايا */
document.querySelector(".corner.next").onclick = ()=>pageFlip.flipNext();
document.querySelector(".corner.prev").onclick = ()=>pageFlip.flipPrev();
</script>

</body>
</html>
